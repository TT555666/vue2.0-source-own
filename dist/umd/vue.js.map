{"version":3,"file":"vue.js","sources":["../../src/observe/array.js","../../src/dep/index.js","../../src/observe/index.js","../../src/state.js","../../src/ast/compileToFunctions.js","../../src/watch/vdom/create-element.js","../../src/watch/observe/patch.js","../../src/util/next-tick.js","../../src/watch/watcher.js","../../src/lifecycle.js","../../src/util/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["let oldArrayProtoMethods = Array.prototype\n\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\n\nlet methods=[\n    'push',\n    'unshift',\n    'splice',\n    'shift',\n    'reverse',\n    'pop',\n    'sort'\n]\n\nmethods.forEach(method=>{\n   \n    arrayMethods[method] = function(...args){\n        const result = oldArrayProtoMethods[method].apply(this,args)\n        const ob = this.__ob__\n        let inserted\n        switch(method){\n            case 'push':\n            case 'unshift':\n                inserted = args\n                break\n            case 'splice':\n                inserted = args.splice(2)\n            default:\n                break\n        }\n        if(inserted) ob.observeArray(inserted)\n        ob.dep.notify()\n\n        return result\n    }\n})","let id = 0;\nclass Dep{\n    constructor(){\n        this.id = id++;\n        this.subs = [];\n    }\n    depend(){\n        if(Dep.target){\n            Dep.target.addDep(this);// 让watcher,去存放dep\n        }\n    }\n    notify(){\n        this.subs.forEach(watcher=>watcher.update());\n    }\n    addSub(watcher){\n        this.subs.push(watcher);\n    }\n}\nlet stack = [];\nexport function pushTarget(watcher){\n    Dep.target = watcher;\n    stack.push(watcher);\n}\nexport function popTarget(){\n    stack.pop();\n    Dep.target = stack[stack.length-1];\n}\nexport default Dep;","import { arrayMethods } from \"./array\";\nimport Dep from \"../dep/index\";\nclass Observe {\n  constructor(value) {\n    this.dep = new Dep(); // 专门为数组设计的\n\n    if (Array.isArray(value)) {\n      value.__proto__ = arrayMethods; // 重写数组原型方法\n      this.observeArray(value);\n    } else {\n      this.walk(value);\n    }\n    Object.defineProperty(value, \"__ob__\", {\n      enumerable: false,\n      configurable: false,\n      value: this,\n    });\n  }\n  walk(data) {\n    let keys = Object.keys(data);\n    keys.forEach((key) => {\n      const value = data[key];\n      defineReactive(data, key, value);\n    });\n  }\n  observeArray(value) {\n    value.forEach((v) => {\n      observe(v);\n    });\n  }\n}\nfunction defineReactive(data, key, value) {\n  let childOb = observe(value);\n  let dep = new Dep();\n  Object.defineProperty(data, key, {\n    get() {\n      if (Dep.target) {\n        // 如果取值时有watcher\n        dep.depend(); // 让watcher保存dep，并且让dep 保存watcher\n        if (childOb) {\n          childOb.dep.depend(); // 收集数组依赖\n          if(Array.isArray(value)){ // 如果内部还是数组\n            dependArray(value);// 不停的进行依赖收集\n        }\n        }\n      }\n      return value;\n    },\n    set(newValue) {\n      if (newValue == value) return;\n      observe(newValue);\n      value = newValue;\n      dep.notify(); // 通知渲染watcher去更新\n    },\n  });\n}\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n      let current = value[i];\n      current.__ob__ && current.__ob__.dep.depend();\n      if (Array.isArray(current)) {\n          dependArray(current)\n      }\n  }\n}\nexport function observe(data) {\n  if (typeof data !== \"object\" && data !== null) {\n    return;\n  }\n  return new Observe(data);\n}\n","// 根据不同属性进行初始化操作\nimport { observe } from \"./observe/index.js\";\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.method) {\n    initMethod(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\nfunction initProps() {}\nfunction initMethod() {}\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\n  for(let key in data){\n    proxy(vm,'_data',key)\n  }\n  observe(data);\n}\nfunction initComputed() {}\nfunction initWatch() {}\n\nfunction proxy(vm,source,key){\n Object.defineProperty(vm,key,{\n   get(){\n     return vm[source][key]\n   },\n   set(newVal){\n    vm[source][key] = newVal\n   }\n }) \n}\n","// #1.解析标签和内容\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nlet root;\nlet currentParent;\nlet stack = [];\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null,\n  };\n}\n\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\nfunction end(tagName) {\n  let element = stack.pop();\n  currentParent = stack[stack.length - 1];\n  if (currentParent) {\n    element.parent = currentParent;\n    currentParent.children.push(element);\n  }\n}\nfunction chars(text) {\n  text = text.replace(/\\s/g, \"\");\n  if (text) {\n    currentParent.children.push({\n      type: TEXT_TYPE,\n      text,\n    });\n  }\n}\nfunction parseHTMl(html) {\n  while (html) {\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd === 0) {\n      const startTagMath = parseStartTag();\n      if (startTagMath) {\n        start(startTagMath.tagName, startTagMath.attrs);\n        continue;\n      }\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    let text;\n    if (textEnd >= 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let attr, end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        match.attrs.push({ name: attr[1], value: attr[3] });\n      }\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n  function advance(n) {\n    html = html.substring(n);\n  }\n}\nfunction gen(node) {\n  if (node.type == 1) {\n      return generate(node);\n  } else {\n      let text = node.text\n      if(!defaultTagRE.test(text)){\n          return `_v(${JSON.stringify(text)})`\n      }\n      let lastIndex = defaultTagRE.lastIndex = 0\n      let tokens = [];\n      let match,index;\n      while (match = defaultTagRE.exec(text)) {\n          index = match.index;\n          if(index > lastIndex){\n              tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n          }\n          tokens.push(`_s(${match[1].trim()})`)\n          lastIndex = index + match[0].length;\n      }\n      if(lastIndex < text.length){\n          tokens.push(JSON.stringify(text.slice(lastIndex)))\n      }\n      return `_v(${tokens.join('+')})`;\n  }\n}\nfunction getChildren(el) {\n  const children = el.children;\n  if (children) {\n    return `${children.map((c) => gen(c)).join(\",\")}`;\n  }\n}\nfunction genProps(attrs){\n    let str = ''\n    for(let i=0;i<attrs.length;i++){\n        let attr =attrs[i]\n        if(attr.name === 'style'){\n            let obj={}\n\n            attr.value.split(';').forEach(item=>{\n                let [key,value] = item.split(':')\n                obj[key] = value\n            })\n            attr.value = obj\n        }\n        str+= `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}`\n}\nfunction generate(el) {\n  let children = getChildren(el);\n  let code = `_c('${el.tag}',${\n    el.attrs.length ? `${genProps(el.attrs)}` : \"undefind\"\n  }${children ? `,${children}` : \"\"})`;\n  return code\n}\n\nexport function compileToFunctions(template) {\n\n  parseHTMl(template);\n  let code = generate(root);\n  let render = `with(this){return ${code}}`\n  let renderFn = new Function(render);\n  return renderFn\n}\n","\nexport function createTextNode(text){\n    return vnode(undefined,undefined,undefined,undefined,text)\n}\n\nexport function createElement(tag,data={},...children){\n\n    let key = data.key\n    if(key){\n        debugger\n        delete data.key\n    }\n    return vnode(tag,data,key,children)\n}\n\nfunction vnode(tag,data,key,children,text){\n    return {\n        tag,data,key,children,text\n    }\n}","export function patch(oldVnode,vnode){\n    const isRealElement = oldVnode.nodeType\n    if(isRealElement){\n        const oldElm = oldVnode\n        const parenElm = oldElm.parentNode\n        let el = createElm(vnode)\n        parenElm.insertBefore(el,oldElm.nextSibling)\n        parenElm.removeChild(oldVnode)\n        return el\n    }\n}\n\nfunction createElm(vnode){\n    let {tag,children,key,data,text} = vnode;\n\n    if(typeof tag === 'string'){\n        vnode.el = document.createElement(tag);\n        updateProperties(vnode);\n        children.forEach(child => { \n            return vnode.el.appendChild(createElm(child));\n        });\n    }else{\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el\n}\n\nfunction updateProperties(vnode){\n    let newProps = vnode.data || {}; // 获取当前老节点中的属性 \n    let el = vnode.el; // 当前的真实节点\n    for(let key in newProps){\n        if(key === 'style'){ \n            for(let styleName in newProps.style){\n                el.style[styleName] = newProps.style[styleName]\n            }\n        }else if(key === 'class'){\n            el.className= newProps.class\n        }else{ // 给这个元素添加属性 值就是对应的值\n            el.setAttribute(key,newProps[key]);\n        }\n    }\n}","let callbacks = [];\nfunction flushCallbacks() {\n    callbacks.forEach(cb => cb());\n}\nlet timerFunc;\nif (Promise) { // then方法是异步的\n    timerFunc = () => {\n        Promise.resolve().then(flushCallbacks)\n    }\n}else if (MutationObserver) { // MutationObserver 也是一个异步方法\n    let observe = new MutationObserver(flushCallbacks); // H5的api\n    let textNode = document.createTextNode(1);\n    observe.observe(textNode, {\n        characterData: true\n    });\n    timerFunc = () => {\n        textNode.textContent = 2;\n    }\n}else if (setImmediate) {\n    timerFunc = () => {\n        setImmediate(flushCallbacks)\n    }\n}else{\n    timerFunc = () => {\n        setTimeout(flushCallbacks, 0);\n    }\n}\nexport function nextTick(cb) {\n    callbacks.push(cb);\n    timerFunc();\n}","import {popTarget,pushTarget} from '../dep/index'\nimport {queueWatcher} from '../nextticket/scheduler'\nlet id  = 0\n\nclass Watcher{\n    constructor(vm,exprOrFn,cb,options){\n        this.vm = vm\n        this.exprOrFn = exprOrFn\n        this.deps = [];\n        this.depsId = new Set();\n        if(typeof exprOrFn == 'function'){\n            this.getter = exprOrFn\n        }\n        this.cb = cb\n        this.options = options\n        this.id = id++\n        this.get()\n    }\n    get(){\n        pushTarget(this);\n        this.getter()\n        popTarget();\n    }\n    addDep(dep){\n        let id = dep.id;\n        if(!this.depsId.has(id)){\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n    update(){\n        this.get();\n        // queueWatcher(this);\n    }\n    run(){\n        console.log('run',this)\n    }\n}\n\nexport default Watcher","import Vue from \"./index\";\nimport {createTextNode,createElement} from './watch/vdom/create-element'\n\nimport { patch } from \"./watch/observe/patch\";\nimport Watcher from \"./watch/watcher\";\nexport function lifecycleMixin() {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode);\n  };\n}\n\nexport function mountComponent(vm, el) {\n    vm.$el = el;\n    let updateComponent = () => {\n        // 将虚拟节点 渲染到页面上\n        vm._update(vm._render());\n    }\n    new Watcher(vm, updateComponent, () => {}, true);\n}\n\nexport function renderMixin(Vue){\n    Vue.prototype._v = function (text){\n        return createTextNode(text)\n    }\n    Vue.prototype._c = function(){\n        return createElement(...arguments)\n    }\n    Vue.prototype._s = function (val) {\n        return val == null? '' : (typeof val === 'object'?JSON.stringify(val):val);\n    }\n    Vue.prototype._render = function(){\n        const vm = this\n        const {render} = vm.$options\n        let vnode = render.call(vm)\n       \n        return vnode\n    }\n}","export const LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed',\n]\nconst strats = {};\nfunction mergeHook(parentVal, childValue) {\n    if (childValue) {\n        if (parentVal) {\n            return parentVal.concat(childValue);\n        } else {\n            return [childValue]\n        }\n    } else {\n        return parentVal;\n    }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n    strats[hook] = mergeHook\n})\nexport function mergeOptions(parent,child){\n    const options = {}\n    for (let key in parent) {\n        mergeField(key)\n    }\n    for (let key in child) {\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key);\n        }\n    }\n    function mergeField(key) {\n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key]);\n        } else {\n            if (typeof parent[key] == 'object' && typeof child[key] == 'object') {\n                options[key] = {\n                    ...parent[key],\n                    ...child[key]\n                }\n            }else{\n                options[key] = child[key];\n            }\n        }\n    }\n    return options\n}\nexport function callHook(vm, hook) {\n    const handlers = vm.$options[hook];\n    if (handlers) {\n        for (let i = 0; i < handlers.length; i++) {\n            handlers[i].call(vm);\n        }\n    }\n}\nexport function initGlobalAPI(Vue){\n    Vue.options = {};\n    Vue.mixin = function (mixin) {\n        debugger\n        // 将属性合并到Vue.options上\n        this.options = mergeOptions(this.options,mixin);\n        return this;\n    }\n}","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./ast/compileToFunctions\";\nimport { mountComponent, renderMixin } from \"./lifecycle\";\nimport { mergeOptions ,callHook} from \"./util/index\";\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = mergeOptions(vm.constructor.options,options);\n    // 初始化状态\n    callHook(vm,'beforeCreate');\n    initState(vm);\n    callHook(vm,'created');\n    if (vm.$options.el) {\n    \tvm.$mount(vm.$options.el);\n    }\n}\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      const render = compileToFunctions(template);\n      options.render = render;\n      // renderMixin(Vue);\n    }\n    mountComponent(vm, el);\n  };\n}\n","import { initMixin } from \"./init\";\nimport {lifecycleMixin,renderMixin} from './lifecycle'\nimport {initGlobalAPI} from './util/index'\nfunction Vue(option) {\n  this._init(option);\n}\ninitGlobalAPI(Vue)\ninitMixin(Vue);\nlifecycleMixin(Vue)\nrenderMixin(Vue)\nexport default Vue;\n"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","ob","__ob__","inserted","splice","observeArray","dep","notify","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observe","value","isArray","__proto__","walk","defineProperty","enumerable","configurable","data","keys","key","defineReactive","v","observe","childOb","get","depend","dependArray","set","newValue","i","current","initState","vm","opts","$options","props","initData","computed","watch","_data","call","proxy","source","newVal","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","parent","start","element","end","chars","text","replace","parseHTMl","html","textEnd","indexOf","startTagMath","parseStartTag","endTagMatch","match","advance","substring","attr","name","n","gen","node","generate","test","JSON","stringify","lastIndex","tokens","index","exec","slice","trim","join","getChildren","el","map","c","genProps","str","obj","split","item","code","compileToFunctions","template","render","renderFn","Function","createTextNode","vnode","undefined","createElement","patch","oldVnode","isRealElement","nodeType","oldElm","parenElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","updateProperties","child","appendChild","newProps","styleName","style","className","setAttribute","callbacks","flushCallbacks","cb","Promise","MutationObserver","textNode","characterData","setImmediate","Watcher","exprOrFn","options","deps","depsId","Set","getter","has","add","addSub","console","log","lifecycleMixin","Vue","_update","$el","mountComponent","updateComponent","_render","renderMixin","_v","_c","arguments","_s","val","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childValue","concat","hook","mergeOptions","mergeField","hasOwnProperty","callHook","handlers","initGlobalAPI","mixin","initMixin","_init","constructor","$mount","querySelector","outerHTML","option"],"mappings":"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"}